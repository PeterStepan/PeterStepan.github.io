<style>
  .container::after {
    content: "";
    display: table;
    clear: both;
  }

</style>

<div class="container" style="margin: auto; width: 450px; box-shadow: 0px 0px 5px rgb(5,5,5); padding: 10px 10px 50px 10px; text-align: center;">
  <h3>
    Na jakou nejvyšší hypotéku máte v ideálním případě nárok?
  </h3>
  Váš čistý měsíční příjem v korunách:
  <div>
    <input type="number" id="pstCistyPrijem" value="30000" max="100000" step="1000" style="height: 30px; width: 250px; font-size: 25px; text-align: center;">
  </div>
  Kolik máte našetřeno (nepovinné):
  <div>
    <input type="number" id="pstNasetreno" value="0" min="0" max="10000000" step="10000" style="height: 30px; width: 250px; font-size: 25px; text-align: center;">
  </div><br>
  <button id="pstSpocitat">
Spočítat
</button><br>
  <div class="pstError2" style="color: red; display: none;">
    Chybně zadané údaje! Čistý měsíční příjem nesmí být nižší než 5000, našetřená částka musí být vyšší nebo rovna nule.<br>
  </div>
  <div>
    <span style="font-size: 12px; color: gray; font-style: italic">Pozn.: Částky se zaokrouhlí na celé tisíce dolů.</span>
  </div>
 

<h3 style="text-align: center;">
    Kolik byste museli mít našetřeno na průměrnou cenu bytu 60 m<sup>2</sup>, pokud byste dostali maximální možnou hypotéku:
  </h3>
  <input id="pstNad" type="radio" name="pstTS" checked> současná doporučení
  <input id="pstPod" type="radio" name="pstTS"> návrh pro lidi do 36 let
  <table id="pstTabulka" class="tabulka-seda" style="border: 0px">
    <thead>
      <tr>
        <th>Město</th>
        <th style="text-align: center;">Průměrná cena bytu</th>
        <th class="pstNad" style="text-align: center;">Nutné mít našetřeno</th>
        <th class="pstPod" style="text-align: center;">Nutné mít našetřeno</th>
        <th class="pstNad" style="text-align: center;">Chybí vám</th>
        <th class="pstPod" style="text-align: center;">Chybí vám</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="pstMesto">Praha 1</td>
        <td class="pstCenaBytuT">9565385</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 2</td>
        <td class="pstCenaBytuT">6886230</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 3</td>
        <td class="pstCenaBytuT">6035534</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 4</td>
        <td class="pstCenaBytuT">4650023</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 5</td>
        <td class="pstCenaBytuT">5650046</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 6</td>
        <td class="pstCenaBytuT">5156954</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 7</td>
        <td class="pstCenaBytuT">6109978</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 8</td>
        <td class="pstCenaBytuT">5235963</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 9</td>
        <td class="pstCenaBytuT">4739501</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Praha 10</td>
        <td class="pstCenaBytuT">4592473</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Brno</td>
        <td class="pstCenaBytuT">3797209</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Ostrava</td>
        <td class="pstCenaBytuT">1370656</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">České Budějovice</td>
        <td class="pstCenaBytuT">2194138</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Hradec Králové</td>
        <td class="pstCenaBytuT">2768987</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Liberec</td>
        <td class="pstCenaBytuT">2409845</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Karlovy Vary</td>
        <td class="pstCenaBytuT">2214884</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Olomouc</td>
        <td class="pstCenaBytuT">2863642</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Pardubice</td>
        <td class="pstCenaBytuT">2364302</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Plzeň</td>
        <td class="pstCenaBytuT">2567171</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Ústí nad Labem</td>
        <td class="pstCenaBytuT">1194000</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Jihlava</td>
        <td class="pstCenaBytuT">2025103</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td class="pstMesto">Zlín</td>
        <td class="pstCenaBytuT">2128958</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
      <tr>
        <td style="font-weight: bold; color: darkblue;">Vlastní hodnota</td>
        <td class="pstCenaBytuT" id="pstVlastniCena">2000000</td>
        <td class="pstNad"> </td>

        <td class="pstPod"> </td>
        <td class="pstNad pstChybiT"> </td>
        <td class="pstPod pstChybiT"> </td>
      </tr>
  
   
    </tbody>
  </table><br>
  <span>Zadat vlastní hodnotu nemovitosti:</span>
  <br>
  <input id="pstVlastniCenaTD" value="1000000" type="number" step="500000" min="100000" max="25000000">&nbsp;<button id="pstVlastniKnoflik">
  Spočítat &#8593;
  </button>
  <br><br>
<span style="font-style: italic; font-size: 12px">Pozn.: Zdroj průměrných cen bytů: realitymix.centrum.cz, částky v posledním sloupci se zaokrouhlují na celé tisíce.</span>
</div>
<br>
<div class="pstSchovat2" style="margin: auto; width: 450px; box-shadow: 0px 0px 5px rgb(5,5,5); padding: 10px; text-align: center; text-align: center; display: none;">

   <div class="pstSchovat2" style="display: none;">
    <div id="pstJenFloat" class="container" style="margin-bottom: 10px;">


      <div class="pstVedleSebe" style="float: left; margin: auto; width: 50%;padding:0;">
        <div style="height: 120px;">
          <h3 style="margin-bottom: 5px;">
            Podle současných doporučení ČNB<br>
            <span style="font-size: 13px">(podle návrhu lidé nad 36 let)</span>
          </h3>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam"><span style="font-size: 18px; font-weight: bold; font-height: 20px">Nejvyšší možná půjčka</span><br><span style="font-size: 13px;; font-height: 20px">(<strong>9x</strong> čistý roční příjem&nbsp;a&nbsp;max. <strong style="color: #6d0000">80 %</strong> hodnoty)</span><br>
          <span id="pstMaxPujcka" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam"><span style="font-size: 18px; font-weight: bold; font-height: 20px">Nutno mít alespoň našetřeno</span><br><span style="font-size: 13px;">(<strong>20 %</strong> hodnoty)</span><br><span id="pstMaxNasetreno" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam">
          <span style="font-size: 18px; font-weight: bold; font-height: 20px">Nejvyšší možná splátka</span><br><span style="font-size: 13px;">(max. <strong>45 %</strong> čistých měsíčních příjmů)</span><br><span id="pstMaxSplatka" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;; font-height: 20px">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 300px; font-height: 20px" class="pstSemTam">S nejvyšší možnou hypotékou a minimální ušetřenou částkou by pak nejvíce dosažitelná nemovitost stála:<br><span id="pstMaxCena" class="pstKc" style="font-weight: bold; font-size: 20px; line-height: 25px; vertical-align: middle; font-height: 20px">0</span>
          <div style="font-size: 15px;">
            S takovou hodnotou by <strong>4%</strong> daň z nabytí nemovitosti vyšla na:
          </div>
          <span id="pstDan" class="pstKc" style="font-weight: bold; font-size: 15px; line-height: 25px; vertical-align: middle;">0</span>
        </div>


      </div>
      <div class="pstVedleSebe" style="float: right; margin: auto; width: 50%; padding:0px;">
        <div style="height: 120px;">
          <h3 style="margin-bottom: 5px;">
            Lidé do 36 let<br>
            <span style="font-size: 13px">(podle návrhu ministerstva)</span>
          </h3>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam"><span style="font-size: 18px; font-weight: bold; font-height: 20px">Nejvyšší možná půjčka</span><br><span style="font-size: 13px">(<strong>10x</strong> čistý roční příjem a max. <strong style="color: #6d0000">90 %</strong> hodnoty)</span><br>
          <span id="pstMaxPujcka2" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam"><span style="font-size: 18px; font-weight: bold; font-height: 20px">Nutno mít alespoň našetřeno</span><br><span style="font-size: 13px;; font-height: 20px">(<strong>10 %</strong> hodnoty)</span><br><span id="pstMaxNasetreno2" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 130px;" class="pstSemTam">
          <span style="font-size: 18px; font-weight: bold; font-height: 20px">Nejvyšší možná splátka</span><br><span style="font-size: 13px; font-height: 20px">(max. <strong>50 %</strong> čistých měsíčních příjmů)</span><br><span id="pstMaxSplatka2" class="pstKc" style="font-weight: bold; font-size: 25px; line-height: 30px; vertical-align: middle;">0</span>
        </div>
        <div style="padding: 2px 5px 5px 5px; height: 300px; font-height: 20px" class="pstSemTam">S nejvyšší možnou hypotékou a minimální ušetřenou částkou by pak nejvíce dosažitelná nemovitost stála:<br><span id="pstMaxCena2" class="pstKc" style="font-weight: bold; font-size: 20px; line-height: 25px; vertical-align: middle;">0</span>
          <div style="font-size: 15px; font-height: 20px">
            S takovou hodnotou by <strong>4%</strong> daň z nabytí nemovitosti vyšla na:
          </div>
          <span id="pstDan2" class="pstKc" style="font-weight: bold; font-size: 15px; line-height: 25px; vertical-align: middle;">0</span>
        </div>


      </div>
    </div>

    <div class="container" style="font-size: 13px; font-style: italic; text-align: center; color: #444;">
      <strong>Pozn.</strong>: Výpočet počítá s LTV (výše hypotéky k hodnotě nemovitosti) <strong style="color: #6d0000">80 %</strong> resp. v návrhu ministerstva <strong style="color: #6d0000">90 %</strong> pro mladé, ač banky mohou až 15 % klientů nabídnout
      LTV o deset procent vyšší, tedy <strong style="color: #6d0000">90 %</strong>, resp. pro mladé až <strong style="color: #6d0000">100 %</strong>.
    </div>
    <div style="font-weight: bold; width: 100%; height: 30px;"><br> V případě sazby <input type="number" id="pstPrumUrok" value="2.9" style="display: inline-block;text-align: center; width: 45px;" step="0.01" min="0.1" max="99"> % by maximální možná hypotéka s maximální možnou splátkou musela být minimálně na:<br>
      <div class="pstVedleSebe" style="float: left; margin: auto; width: 50%; height: 50px; padding:0;">
        <span id="pstMaxRoky" style="font-size: 30px;">0</span><br>let<br>(bez ukončení fixace)
      </div>
      <div class="pstVedleSebe" style="float: right; margin: auto; width: 50%; height: 50px; padding:0;">
        <span id="pstMaxRoky2" style="font-size: 30px;">0</span><br>let<br>(bez ukončení fixace)
      </div>



    </div>
  </div>


<br><br>
  <button id="pstZavrit">
  Zavřít
  </button>
</div>
<script type="text/javascript">
$(document).ready(function() {


  function pstLocale(co, odkud, dokud) {
    $(co).each(function(index) {
      if (index < odkud) {
        return
      }
      if (index == dokud) {
        return false;
      }
      $(this).text(Math.round($(this).text()).toLocaleString('cs-CZ', {
        style: 'currency',
        currency: 'CZK',
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
      }))


    })
  }

  function pstVzorecek(c, u, o) {
    return (c * u) * (1 + (1 / (((u + 1) ** (o) - 1))))
  }


  $('input[name="pstTS"]').change(function() {
    if ($('input[name="pstTS"]').eq(0).is(':checked')) {
      $('.pstPod').hide()
      $('.pstNad').show()
    } else {
      $('.pstPod').show()
      $('.pstNad').hide()
    }
  })

  function pstSpocitat() {

    if ($('#pstCistyPrijem').val() < 5000 || $('#pstCistyPrijem').val() > 200000 || isNaN($('#pstCistyPrijem').val()) || $('#pstNasetreno').val() < 0 || $('#pstNasetreno').val() > 10000000 || isNaN($('#pstNasetreno').val())) {
      $('.pstSchovat2').hide();
      $('.pstError2').fadeIn();
    } else {
      $('.pstError2').hide();
      $('.pstSchovat2').fadeIn()
      $('.pstPod').hide() 
      $('.pstNad').show()
      $('input[name="pstTS"]').eq(0).prop("checked", true)


      var pstCistyPrijem = Math.floor($('#pstCistyPrijem').val() / 1000) * 1000
      $('#pstCistyPrijem').val(pstCistyPrijem)
      var pstMaxPujcka = pstCistyPrijem * 108
      var pstMaxSplatka = pstCistyPrijem * 0.45
      var pstMaxCena = pstMaxPujcka / 0.8
      var pstDan = pstMaxCena * 0.04
      var pstMaxNasetreno = pstMaxCena - pstMaxPujcka
      var pstPrumUrok = $('#pstPrumUrok').val() / 100 / 12

      var pstMaxPujcka2 = pstCistyPrijem * 120
      var pstMaxSplatka2 = pstCistyPrijem * 0.5
      var pstMaxCena2 = pstMaxPujcka2 / 0.9
      var pstDan2 = pstMaxCena2 * 0.04
      var pstMaxNasetreno2 = pstMaxCena2 - pstMaxPujcka2
      var pstPrumUrok2 = $('#pstPrumUrok').val() / 100 / 12

      var pstSplatkaTest
      var pstSplatkaTest2

      var pstNasetreno = Math.floor($('#pstNasetreno').val() / 1000) * 1000;
      $('#pstNasetreno').val(pstNasetreno)

      for (var pstMaxRoky = 1; pstMaxRoky <= 100; pstMaxRoky++) {
        pstSplatkaTest = pstVzorecek(pstMaxPujcka, pstPrumUrok, pstMaxRoky * 12)
        if (pstSplatkaTest <= pstMaxSplatka) {
          $('#pstMaxRoky').text(pstMaxRoky)
          break;
        } else {
          $('#pstMaxRoky').text('více než 100')
        }
      }

      for (var pstMaxRoky2 = 1; pstMaxRoky2 <= 100; pstMaxRoky2++) {
        pstSplatkaTest2 = pstVzorecek(pstMaxPujcka2, pstPrumUrok2, pstMaxRoky2 * 12)
        if (pstSplatkaTest2 <= pstMaxSplatka2) {
          $('#pstMaxRoky2').text(pstMaxRoky2)
          break;
        } else {
          $('#pstMaxRoky2').text('více než 100')
        }
      }


      $('#pstMaxPujcka').text(pstMaxPujcka)
      $('#pstMaxSplatka').text(pstMaxSplatka)
      $('#pstMaxCena').text(pstMaxCena)
      $('#pstDan').text(pstDan)
      $('#pstMaxNasetreno').text(pstMaxNasetreno)
      $('#pstMaxPujcka2').text(pstMaxPujcka2)
      $('#pstMaxSplatka2').text(pstMaxSplatka2)
      $('#pstMaxCena2').text(pstMaxCena2)
      $('#pstDan2').text(pstDan2)
      $('#pstMaxNasetreno2').text(pstMaxNasetreno2)
      pstLocale('.pstKc', 0, 10)

      var pstCenyBytu = []

      $('#pstTabulka .pstCenaBytuT').each(function() {
        var pstTekst = $(this).text().replace(/\D/g, '') 

        pstCenyBytu.push(parseInt(pstTekst))
      })

      $('.pstPod').hide() 
      $('.pstNad').show() 
      var pstNasporeno;
      var pstNasporeno2;
      var pstChybi;
      var pstChybi2;

      $('#pstTabulka tr').each(function(index) {
        if (index == 0) {
          return;
        }

        if (0.8 * pstCenyBytu[index - 1] >= pstMaxPujcka) {
          pstNasporeno = pstCenyBytu[index - 1] - pstMaxPujcka
        } else {
          pstNasporeno = pstCenyBytu[index - 1] - 0.8 * pstCenyBytu[index - 1]
        }

        if (0.9 * pstCenyBytu[index - 1] >= pstMaxPujcka2) {
          pstNasporeno2 = pstCenyBytu[index - 1] - pstMaxPujcka2
        } else {
          pstNasporeno2 = pstCenyBytu[index - 1] - 0.9 * pstCenyBytu[index - 1]
        }


 

        if (pstNasporeno <= pstNasetreno) {

          if (pstCenyBytu[index - 1] <= pstNasetreno) {
            pstChybi = 'Nemusíte si půjčovat :-)'
          } else {
            pstChybi = 0
          }
        } else {

          pstChybi = Math.round((pstNasporeno - pstNasetreno)/1000)*1000
        }

        if (pstNasporeno2 <= pstNasetreno) {

          if (pstCenyBytu[index - 1] <= pstNasetreno) {
            pstChybi2 = 'Nemusíte si půjčovat :-)'

          } else {
            pstChybi2 = 0

          }
        } else {

          pstChybi2 = Math.round((pstNasporeno2 - pstNasetreno)/1000)*1000
        }

        $('td', this).eq(2).text(pstNasporeno)
        $('td', this).eq(3).text(pstNasporeno2)
        $('td', this).eq(4).text(pstChybi)
        $('td', this).eq(5).text(pstChybi2)
      }) 
      $('#pstTabulka td').each(function() {
        if (isNaN($(this).text())) {
          return;
        }
               $(this).text(Math.round($(this).text()).toLocaleString('cs-CZ', {
          minimumFractionDigits: 0,
          maximumFractionDigits: 2
        }))

      })
      
      $('.pstChybiT').each(function() {
      var pstDisText = $(this).text().replace(/\D/g, '')
      var pstColor;
      
      if (pstDisText == 0) {pstColor = '#27AE60'}
      else if (pstDisText < 100000) {pstColor = '#D5F5E3'}
      else if (pstDisText < 50000) {pstColor = '#A9DFBF'}
      else if (pstDisText < 25000) {pstColor = '#7DCEA0'}
      else if (pstDisText < 10000) {pstColor = '#52BE80'}
      else {pstColor = '#F1948A'}       
  $(this).css('background-color',pstColor)
      })
      

    } 
  } 

  $('#pstVlastniKnoflik').click(function() {
    var pstMapaData = [];
    $('#pstVlastniCena').text($('#pstVlastniCenaTD').val())
    pstSpocitat()
    
    /*tohle nepoužívat, mělo být k mapce for (var x = 0; x < 22; x++) {
    pstMapaData.push([$('.pstMesto').eq(x).text(),$('.pstCenaBytuT').eq(x).text(),$('.pstChybiT').eq(x).text()])
    
    
    }
    $('#test').text(pstMapaData)*/
  })

  $('#pstSpocitat').click(function() {
    pstSpocitat()

    $('.pstSemTam:odd').css("background-color", "#fdd");
    $('.pstSemTam:even').css("background-color", "#eaf2ff");

  })
  $('#pstZavrit').click(function() {$('.pstSchovat2').hide()})
  
  
  $('#pstPrumUrok').change(function() {
    pstSpocitat()



  });


})

</script>
